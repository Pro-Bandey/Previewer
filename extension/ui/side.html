<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Sidebar specific overrides */
        body { width: 100%; height: 100vh; font-size: 14px; }
        .app-header { flex-wrap: wrap; height: auto; padding: 10px; gap: 8px; }
        .toolbar-right { margin-left: auto; }
        .preview-pane { background-color: #fff; }
        #previewContainer { height: 100%; width: 100%; }
    </style>
</head>
<body class="dark-theme">
    <!-- Compact Header -->
    <header class="app-header">
        <div class="brand">GitPreview</div>
        
        <div class="toolbar-right">
            <button id="refreshBtn" class="action-btn" title="Refresh">
               <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
            </button>
            <button id="downloadBtn" class="action-btn" disabled title="Download">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            </button>
            <button id="newTabBtn" class="action-btn" title="Open in Full Tab">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
            </button>
        </div>

        <!-- Toggles Row -->
        <div style="display:flex; gap: 10px; width: 100%; justify-content: space-between; align-items: center; margin-top: 5px;">
            <div class="toggle-wrapper">
                <label class="switch"><input type="checkbox" id="disableJs"><span class="slider round"></span></label>
                <span class="label-text">No JS</span>
            </div>
            <div class="toggle-wrapper">
                <label class="switch"><input type="checkbox" id="isolateCss" checked><span class="slider round"></span></label>
                <span class="label-text">Scoped</span>
            </div>
            <div id="status" style="font-size:0.7rem; color:var(--text-muted)">Ready</div>
        </div>
    </header>

    <main class="workspace">
        <div id="previewContainer" class="sandbox-container" style="border:none">
            <div class="empty-state" style="padding:20px">
                <p>Select a file from the extension popup to preview here.</p>
            </div>
        </div>
    </main>

    <!-- Hidden inputs for compatibility with core modules -->
    <input type="hidden" id="proxyInput" value="https://corsproxy.io/?">

    <script type="module" src="side.js"></script>
</body>
</html>